//==================================================================================================
// 
// Generated Map Script
// 
// Name:   Dominion Space
// 
//==================================================================================================
include "TriggerLibs/NativeLib"
include "TriggerLibs/SwarmCampaignLib"
include "Lib281DEC45"

//--------------------------------------------------------------------------------------------------
// Library Initialization
//--------------------------------------------------------------------------------------------------
void InitLibs () {
    libNtve_InitLib();
    libSwaC_InitLib();
    lib281DEC45_InitLib();
}

//--------------------------------------------------------------------------------------------------
// Global Variables
//--------------------------------------------------------------------------------------------------
unit gv_uNITSETSpace00;
unit gv_uNITSETSpace02;
unit gv_uNITSETLeviathan00;
unit gv_uNITSETLeviathan01;
unit gv_uNITSETLeviathan02;
unit gv_uNITSETLeviathanPool;
bool gv_hyperionIntroPlayed;
bool gv_kerriganTurnPlayed;
bool gv_leviathanBirthPlayed;
bool gv_ambientScenesPlayed;
int gv_cutsceneLoadingDialog;
timer gv_cutsceneLoadingTimer;

void InitGlobals () {
    gv_cutsceneLoadingDialog = c_invalidDialogId;
    gv_cutsceneLoadingTimer = TimerCreate();
}

//--------------------------------------------------------------------------------------------------
// Global Function Declarations
//--------------------------------------------------------------------------------------------------
void gf_InitAmbientScenes ();

//--------------------------------------------------------------------------------------------------
// Trigger Variables
//--------------------------------------------------------------------------------------------------
trigger gt_Initialization;
trigger gt_KaldrInit01Units;
trigger gt_KaldrInit03Conversations2;
trigger gt_KaldrInit04Environment2;
trigger gt_SpaceInit05Characters;
trigger gt_SpaceInit06Scenes;
trigger gt_ApplyKaldirLighting;
trigger gt_PrepareSpaceSet;
trigger gt_ViewSpaceSet;
trigger gt_ConvoAdjutantPre;
trigger gt_ConvoZagaraPre;
trigger gt_ConvoStukovPre;
trigger gt_ConvoStukovPost;
trigger gt_ConvoZagaraLineHandle;
trigger gt_ConvoHyperionPre;
trigger gt_ConvoHyperionPost;
trigger gt_ConvoDehakaPre;
trigger gt_ConvoDehakaLineHandle;
trigger gt_PlanetArrival;
trigger gt_PlanetDeparture;
trigger gt_LeviathanBirth;
trigger gt_LeviathanBirthIzshaBirth;
trigger gt_LeviathanBirthLeviathanAnim;
trigger gt_zSMBriefing_Space02;
trigger gt_zSMBriefing_Space02CutsceneLoaded;
trigger gt_zDebrief_DoWArc5;
trigger gt_zDebrief_DoWArc6;

//--------------------------------------------------------------------------------------------------
// Global Functions
//--------------------------------------------------------------------------------------------------
void gf_InitAmbientScenes () {
    // Implementation
    if ((gv_ambientScenesPlayed == true)) {
        return ;
    }
    else {
        gv_ambientScenesPlayed = true;
    }
    lib281DEC45_gf_PlayAmbientScene("zLD_Maggot");
    if ((libSwaC_gf_MissionStatusCheck("ZSpace1", libSwaC_ge_MissionStatus_Completed) == false)) {
        lib281DEC45_gf_PlayAmbientScene("zLD_Space_p1");
    }
    else {
        lib281DEC45_gf_PlayAmbientScene("zLD_Space_hyp_p1");
    }
    if ((libSwaC_gf_MissionStatusCheck("ZSpace2", libSwaC_ge_MissionStatus_Completed) == false)) {
        lib281DEC45_gf_PlayAmbientScene("zLD_Zergling_walkthrough");
    }
    else {
    }
}

//--------------------------------------------------------------------------------------------------
// Trigger: Initialization
//--------------------------------------------------------------------------------------------------
bool gt_Initialization_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    CutsceneSetGlobalFilter("Space");
    lib281DEC45_gf_InitializeSwarmStoryData("ZStorySpace");
    libSwaC_gf_RegisterStoryEvent(libSwaC_ge_ZS_Event_StoryUtilViewMainSet, gt_ViewSpaceSet);
    libSwaC_gf_RegisterStoryEvent(libSwaC_ge_ZS_Event_StoryUtilPrepareMainSet, gt_PrepareSpaceSet);
    TriggerExecute(gt_KaldrInit01Units, true, false);
    TriggerExecute(gt_KaldrInit03Conversations2, true, false);
    TriggerExecute(gt_KaldrInit04Environment2, true, false);
    TriggerExecute(gt_SpaceInit05Characters, true, false);
    TriggerExecute(gt_SpaceInit06Scenes, true, false);
    lib281DEC45_gf_BeginStoryMode();
    AchievementTermQuantitySet(1, "KerriganPower70", MinI(libSwaC_gf_StoryKerriganLevel(), 70));
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_Initialization_Init () {
    gt_Initialization = TriggerCreate("gt_Initialization_Func");
    TriggerAddEventMapInit(gt_Initialization);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Space Init 01 Units
//--------------------------------------------------------------------------------------------------
bool gt_KaldrInit01Units_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_StoryCreateSetUnit("SMX1DominionSpaceSet02", lib281DEC45_gf_StoryModeDefaultPosition(), 270.0);
    gv_uNITSETSpace02 = UnitLastCreated();
    lib281DEC45_gf_StoryCreateSetUnit("SMX1DominionSpaceSet", UnitGetAttachmentPoint(gv_uNITSETSpace02, "Pos_SetLocation"), 270.0);
    gv_uNITSETSpace00 = UnitLastCreated();
    UnitSetHeight(gv_uNITSETSpace00, PointGetHeight(UnitGetAttachmentPoint(gv_uNITSETSpace02, "Pos_SetLocation")), 0.0);
    lib281DEC45_gf_StoryCreateSetUnit("SMX1LeviathanSet", lib281DEC45_gf_StoryModeDefaultPosition(), 270.0);
    gv_uNITSETLeviathan00 = UnitLastCreated();
    lib281DEC45_gf_StoryCreateSetUnit("SMX1LeviathanSet01", lib281DEC45_gf_StoryModeDefaultPosition(), 270.0);
    gv_uNITSETLeviathan01 = UnitLastCreated();
    lib281DEC45_gf_StoryCreateSetUnit("SMX1LeviathanSet02", lib281DEC45_gf_StoryModeDefaultPosition(), 270.0);
    gv_uNITSETLeviathan02 = UnitLastCreated();
    lib281DEC45_gf_StoryCreateSetUnit("SMX1LeviathanSet03", lib281DEC45_gf_StoryModeDefaultPosition(), 270.0);
    gv_uNITSETLeviathanPool = UnitLastCreated();
    UnitCreate(1, "SMX1LeviathanSetCalloutPositions", 0, 1, lib281DEC45_gf_StoryModeDefaultPosition(), 270.0);
    lib281DEC45_gf_StoryAddCalloutAttachmentUnit(UnitLastCreated());
    lib281DEC45_gf_StoryCreateKerrigan(lib281DEC45_gf_StoryModeDefaultPosition());
    lib281DEC45_gf_SetCharacterUnit("Zerg Adjutant", UnitFromId(3));
    lib281DEC45_gf_SetCharacterUnit("Evolution Master", UnitFromId(4));
    if ((libSwaC_gf_MissionStatusCheck("ZHybrid1", libSwaC_ge_MissionStatus_Completed) == true)) {
        lib281DEC45_gf_SetCharacterUnit("Stukov", UnitFromId(47));
    }
    else {
    }
    lib281DEC45_gf_SetCharacterUnit("Primal Advisor", UnitFromId(46));
    lib281DEC45_gf_SetCharacterUnit("Zagara", UnitFromId(31));
    if ((libSwaC_gf_MissionStatusCheck("ZSpace1", libSwaC_ge_MissionStatus_Completed) == true)) {
        lib281DEC45_gf_CreateStoryCharacter("Hotspot - Space - Hyperion", "SMX1DominionSpaceSet01", lib281DEC45_gf_StoryModeDefaultPosition());
    }
    else {
    }
    lib281DEC45_gf_StoryCreateUnitForCutsceneAliasing(libSwaC_gf_StoryArmyCategoryUIUnitType("Zergling"), "ZSMZergling");
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_KaldrInit01Units_Init () {
    gt_KaldrInit01Units = TriggerCreate("gt_KaldrInit01Units_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Space Init 03 Conversations
//--------------------------------------------------------------------------------------------------
bool gt_KaldrInit03Conversations2_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_SetCharacterPreCallback("Zerg Adjutant", gt_ConvoAdjutantPre);
    lib281DEC45_gf_SetCharacterPreCallback("Zagara", gt_ConvoZagaraPre);
    lib281DEC45_gf_SetCharacterPreCallback("Stukov", gt_ConvoStukovPre);
    lib281DEC45_gf_SetCharacterPostCallback("Stukov", gt_ConvoStukovPost);
    lib281DEC45_gf_SetCharacterPreCallback("Primal Advisor", gt_ConvoDehakaPre);
    lib281DEC45_gf_SetCharacterPreCallback("Hotspot - Space - Hyperion", gt_ConvoHyperionPre);
    lib281DEC45_gf_SetCharacterPostCallback("Hotspot - Space - Hyperion", gt_ConvoHyperionPost);
    lib281DEC45_gf_SetCharacterCameraCallback("Zagara", gt_ConvoZagaraLineHandle);
    lib281DEC45_gf_SetCharacterCameraCallback("Primal Advisor", gt_ConvoDehakaLineHandle);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_KaldrInit03Conversations2_Init () {
    gt_KaldrInit03Conversations2 = TriggerCreate("gt_KaldrInit03Conversations2_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Space Init 04 Environment
//--------------------------------------------------------------------------------------------------
bool gt_KaldrInit04Environment2_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_ApplyStorymodeEnvironment();
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_KaldrInit04Environment2_Init () {
    gt_KaldrInit04Environment2 = TriggerCreate("gt_KaldrInit04Environment2_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Space Init 05 Characters
//--------------------------------------------------------------------------------------------------
bool gt_SpaceInit05Characters_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_EnableDisableCharacter("Kerrigan", true);
    lib281DEC45_gf_EnableDisableCharacter("Zerg Adjutant", true);
    lib281DEC45_gf_EnableDisableCharacter("Zagara", true);
    if ((libSwaC_gf_MissionStatusCheck("ZHybrid1", libSwaC_ge_MissionStatus_Completed) == true)) {
        lib281DEC45_gf_EnableDisableCharacter("Stukov", true);
    }
    else {
    }
    lib281DEC45_gf_EnableDisableCharacter("Primal Advisor", true);
    if ((libSwaC_gf_MissionStatusCheck("ZSpace1", libSwaC_ge_MissionStatus_Completed) == true)) {
        lib281DEC45_gf_EnableDisableCharacter("Hotspot - Space - Hyperion", true);
    }
    else {
        lib281DEC45_gf_EnableDisableCharacter("Hotspot - Space - Hyperion", false);
    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_SpaceInit05Characters_Init () {
    gt_SpaceInit05Characters = TriggerCreate("gt_SpaceInit05Characters_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Space Init 06 Scenes
//--------------------------------------------------------------------------------------------------
bool gt_SpaceInit06Scenes_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_SetScriptedSceneCallback("Scene25", gt_zSMBriefing_Space02);
    lib281DEC45_gf_SetScriptedSceneCallback("Scene12", gt_zDebrief_DoWArc5);
    lib281DEC45_gf_SetScriptedSceneCallback("Scene13", gt_zDebrief_DoWArc6);
    lib281DEC45_gf_SetScriptedSceneCallback("Scene32", gt_PlanetArrival);
    lib281DEC45_gf_SetScriptedSceneCallback("Scene33", gt_PlanetDeparture);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_SpaceInit06Scenes_Init () {
    gt_SpaceInit06Scenes = TriggerCreate("gt_SpaceInit06Scenes_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Apply Space Lighting
//--------------------------------------------------------------------------------------------------
bool gt_ApplyKaldirLighting_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    GameSetLighting("SMX1DominionSpaceUI", 0.0);
    if ((lib281DEC45_gf_CharacterIsEnabled("Stukov") == true)) {
        lib281DEC45_gf_PlaySetLighting("Stukov", lib281DEC45_gf_CharacterSceneNameToken("Stukov"));
    }
    else {
    }
    lib281DEC45_gf_PlaySetLighting("Zagara", lib281DEC45_gf_CharacterSceneNameToken("Zagara"));
    lib281DEC45_gf_PlaySetLighting("Primal Advisor", lib281DEC45_gf_CharacterSceneNameToken("Primal Advisor"));
    lib281DEC45_gf_PlaySetLighting("Zerg Adjutant", lib281DEC45_gf_CharacterSceneNameToken("Zerg Adjutant"));
    lib281DEC45_gf_PlaySetLighting("Kerrigan", "KerriganB");
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_ApplyKaldirLighting_Init () {
    gt_ApplyKaldirLighting = TriggerCreate("gt_ApplyKaldirLighting_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Prepare Space Set
//--------------------------------------------------------------------------------------------------
bool gt_PrepareSpaceSet_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    UnitSetHeight(lib281DEC45_gf_CharacterUnit("Zerg Adjutant"), lib281DEC45_gv_zSSC_DefaultAdjutantHeight, 0.0);
    lib281DEC45_gf_StorySetUnitLocation(lib281DEC45_gf_CharacterUnit("Kerrigan"), UnitGetAttachmentPoint(gv_uNITSETLeviathan00, "Pos_SetLocation 04"));
    lib281DEC45_gf_StorySetUnitLocation(lib281DEC45_gf_CharacterUnit("Zerg Adjutant"), UnitGetAttachmentPoint(gv_uNITSETLeviathan00, "Pos_SetLocation 03"));
    lib281DEC45_gf_StorySetUnitLocation(lib281DEC45_gf_CharacterUnit("Zagara"), UnitGetAttachmentPoint(gv_uNITSETLeviathan00, "Pos_SetLocation 05"));
    lib281DEC45_gf_StorySetUnitLocation(lib281DEC45_gf_CharacterUnit("Primal Advisor"), UnitGetAttachmentPoint(gv_uNITSETLeviathan00, "Pos_SetLocation 06"));
    lib281DEC45_gf_StorySetUnitLocation(lib281DEC45_gf_CharacterUnit("Stukov"), UnitGetAttachmentPoint(gv_uNITSETLeviathan00, "Pos_SetLocation 09"));
    libNtve_gf_SendActorMessageToUnit(gv_uNITSETLeviathan00, "TextureGroupApply spaceset");
    libNtve_gf_SendActorMessageToUnit(gv_uNITSETLeviathan01, "TextureGroupApply spaceset");
    libNtve_gf_SendActorMessageToUnit(gv_uNITSETLeviathan02, "TextureGroupApply spaceset");
    libNtve_gf_SendActorMessageToUnit(gv_uNITSETLeviathanPool, "TextureGroupApply spaceset");
    lib281DEC45_gf_ShowHideUnitAbs(true, gv_uNITSETSpace00);
    lib281DEC45_gf_ShowHideUnitAbs(true, gv_uNITSETSpace02);
    lib281DEC45_gf_ShowHideUnitAbs(true, gv_uNITSETLeviathan00);
    lib281DEC45_gf_ShowHideUnitAbs(true, gv_uNITSETLeviathan01);
    lib281DEC45_gf_ShowHideUnitAbs(true, gv_uNITSETLeviathan02);
    lib281DEC45_gf_ShowHideUnitAbs(false, gv_uNITSETLeviathanPool);
    lib281DEC45_gf_ShowHideUnitAbs(true, lib281DEC45_gf_CharacterUnit("Kerrigan"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Evolution Master"));
    lib281DEC45_gf_ShowHideUnitAbs(true, lib281DEC45_gf_CharacterUnit("Zerg Adjutant"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Horner"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Valerian"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Raynor"));
    lib281DEC45_gf_ShowHideUnitAbs(true, lib281DEC45_gf_CharacterUnit("Zagara"));
    lib281DEC45_gf_TurnAnimationPropertiesOnOff(lib281DEC45_gf_CharacterUnit("Zagara"), "B", false, 0.0);
    lib281DEC45_gf_ShowHideUnitAbs(true, lib281DEC45_gf_CharacterUnit("Primal Advisor"));
    if ((libSwaC_gf_MissionStatusCheck("ZSpace1", libSwaC_ge_MissionStatus_Completed) == true)) {
        lib281DEC45_gf_ShowHideUnitAbs(true, lib281DEC45_gf_CharacterUnit("Hotspot - Space - Hyperion"));
    }
    else {
        lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Hotspot - Space - Hyperion"));
    }
    if ((lib281DEC45_gf_CharacterIsEnabled("Stukov") == true)) {
        lib281DEC45_gf_ShowHideUnitAbs(true, lib281DEC45_gf_CharacterUnit("Stukov"));
        lib281DEC45_gf_TurnAnimationPropertiesOnOff(lib281DEC45_gf_CharacterUnit("Stukov"), "B", false, 0.0);
    }
    else {
        lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Stukov"));
    }
    lib281DEC45_gf_StoryPlayMainSetSound(SoundLink("Set_Ambient_Space1_Oneshots", -1), 1);
    SoundtrackPlay(PlayerGroupAll(), c_soundtrackCategoryAmbience, "Ambience_Leviathan_Mouth_Space", c_soundtrackCueAny, c_soundtrackIndexAny, false);
    FogSetEnabled(false);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_PrepareSpaceSet_Init () {
    gt_PrepareSpaceSet = TriggerCreate("gt_PrepareSpaceSet_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: View Space Set
//--------------------------------------------------------------------------------------------------
bool gt_ViewSpaceSet_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    TriggerExecute(gt_ApplyKaldirLighting, true, false);
    lib281DEC45_gf_ShowHideUnitAbs(true, gv_uNITSETLeviathanPool);
    CameraUseModel(1, gv_uNITSETLeviathan00, "Camera_Far", 0.0);
    if ((lib281DEC45_gf_CharacterIsEnabled("Stukov") == true)) {
        lib281DEC45_gf_TurnAnimationPropertiesOnOff(lib281DEC45_gf_CharacterUnit("Stukov"), "B", true, 0.0);
    }
    else {
    }
    if ((libSwaC_gf_LastMap() == "ZSpace1") && (gv_hyperionIntroPlayed == false)) {
        gv_hyperionIntroPlayed = true;
        libNtve_gf_PlayAnimation(libNtve_gf_MainActorofUnit(lib281DEC45_gf_CharacterUnit("Hotspot - Space - Hyperion")), c_animNameDefault, "Stand Start", 0, 0.0);
    }
    else {
    }
    if ((libSwaC_gf_MissionStatusCheck("ZSpace2", libSwaC_ge_MissionStatus_Completed) == true)) {
        lib281DEC45_gf_TurnAnimationPropertiesOnOff(lib281DEC45_gf_CharacterUnit("Kerrigan"), "Turn Cover", true, 0.0);
        UnitSetState(lib281DEC45_gf_CharacterUnit("Kerrigan"), c_unitStateFidget, false);
        if ((gv_kerriganTurnPlayed == false)) {
            gv_kerriganTurnPlayed = true;
            libNtve_gf_PlayAnimation(libNtve_gf_MainActorofUnit(lib281DEC45_gf_CharacterUnit("Kerrigan")), c_animNameDefault, "Stand Start", 0, 0.0);
        }
        else {
        }
    }
    else {
    }
    lib281DEC45_gf_TurnAnimationPropertiesOnOff(lib281DEC45_gf_CharacterUnit("Zagara"), "B", true, 0.0);
    if ((gv_leviathanBirthPlayed == false) && (libSwaC_gf_StoryMapTypeCheck(libSwaC_gf_LastMap(), c_mapKindStory) == true)) {
        gv_leviathanBirthPlayed = true;
        TriggerExecute(gt_LeviathanBirth, false, true);
    }
    else {
    }
    gf_InitAmbientScenes();
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_ViewSpaceSet_Init () {
    gt_ViewSpaceSet = TriggerCreate("gt_ViewSpaceSet_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Convo Adjutant Pre
//--------------------------------------------------------------------------------------------------
bool gt_ConvoAdjutantPre_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Zagara"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Stukov"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Primal Advisor"));
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_ConvoAdjutantPre_Init () {
    gt_ConvoAdjutantPre = TriggerCreate("gt_ConvoAdjutantPre_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Convo Zagara Pre
//--------------------------------------------------------------------------------------------------
bool gt_ConvoZagaraPre_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Zerg Adjutant"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Stukov"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Primal Advisor"));
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_ConvoZagaraPre_Init () {
    gt_ConvoZagaraPre = TriggerCreate("gt_ConvoZagaraPre_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Convo Stukov Pre
//--------------------------------------------------------------------------------------------------
bool gt_ConvoStukovPre_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Zagara"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Zerg Adjutant"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Primal Advisor"));
    libNtve_gf_SendActorMessageToUnit(gv_uNITSETLeviathan00, "AnimSetPausedAll");
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_ConvoStukovPre_Init () {
    gt_ConvoStukovPre = TriggerCreate("gt_ConvoStukovPre_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Convo Stukov Post
//--------------------------------------------------------------------------------------------------
bool gt_ConvoStukovPost_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    libNtve_gf_SendActorMessageToUnit(gv_uNITSETLeviathan00, "AnimSetPausedAll 0");
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_ConvoStukovPost_Init () {
    gt_ConvoStukovPost = TriggerCreate("gt_ConvoStukovPost_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Convo Zagara Line Handle
//--------------------------------------------------------------------------------------------------
bool gt_ConvoZagaraLineHandle_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    if (((lib281DEC45_gf_CurrentConversationCamera() == lib281DEC45_ge_CameraType_Custom01) || (lib281DEC45_gf_CurrentConversationCamera() == lib281DEC45_ge_CameraType_Custom02) || (lib281DEC45_gf_CurrentConversationCamera() == lib281DEC45_ge_CameraType_Custom03) || (lib281DEC45_gf_CurrentConversationCamera() == lib281DEC45_ge_CameraType_Custom01Listener) || (lib281DEC45_gf_CurrentConversationCamera() == lib281DEC45_ge_CameraType_Custom02Listener) || (lib281DEC45_gf_CurrentConversationCamera() == lib281DEC45_ge_CameraType_Custom03Listener))) {
        lib281DEC45_gf_SkipConversationLookAt();
    }
    else {
    }
    if ((ConversationDataActiveLine() == "zSM_RogueQueen|Line00080")) {
        libNtve_gf_MakeUnitLookAtUnit(lib281DEC45_gf_CharacterUnit("Zagara"), "InstantHeadOnly", lib281DEC45_gf_CharacterUnit("Kerrigan"), "Ref_Head");
    }
    else {
    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_ConvoZagaraLineHandle_Init () {
    gt_ConvoZagaraLineHandle = TriggerCreate("gt_ConvoZagaraLineHandle_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Convo Hyperion Pre
//--------------------------------------------------------------------------------------------------
bool gt_ConvoHyperionPre_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_ChangeRoom(lib281DEC45_ge_Rooms_StoryRoomVoid);
    if ((libSwaC_gf_MissionStatusCheck("ZSpace2", libSwaC_ge_MissionStatus_Completed) == true)) {
        SoundtrackPlay(PlayerGroupAll(), c_soundtrackCategoryMusic, "ZSpace02MusicCutscene20_MengskRemoved", c_soundtrackCueAny, c_soundtrackIndexAny, false);
    }
    else if ((libSwaC_gf_MissionStatusCheck("ZSpace2", libSwaC_ge_MissionStatus_Available) == true)) {
        SoundtrackPlay(PlayerGroupAll(), c_soundtrackCategoryMusic, "ZSpace02MusicCutscene01_ColonelOrlan", c_soundtrackCueAny, c_soundtrackIndexAny, false);
    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_ConvoHyperionPre_Init () {
    gt_ConvoHyperionPre = TriggerCreate("gt_ConvoHyperionPre_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Convo Hyperion Post
//--------------------------------------------------------------------------------------------------
bool gt_ConvoHyperionPost_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_ChangeRoom(lib281DEC45_ge_Rooms_StoryRoomMainSet);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_ConvoHyperionPost_Init () {
    gt_ConvoHyperionPost = TriggerCreate("gt_ConvoHyperionPost_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Convo Dehaka Pre
//--------------------------------------------------------------------------------------------------
bool gt_ConvoDehakaPre_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Zagara"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Zerg Adjutant"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Stukov"));
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_ConvoDehakaPre_Init () {
    gt_ConvoDehakaPre = TriggerCreate("gt_ConvoDehakaPre_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Convo Dehaka Line Handle
//--------------------------------------------------------------------------------------------------
bool gt_ConvoDehakaLineHandle_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    if ((lib281DEC45_gf_CurrentCameraCharacter() == "Zagara")) {
        lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Primal Advisor"));
        lib281DEC45_gf_ShowHideUnitAbs(true, lib281DEC45_gf_CharacterUnit("Zagara"));
    }
    else {
        lib281DEC45_gf_ShowHideUnitAbs(true, lib281DEC45_gf_CharacterUnit("Primal Advisor"));
        lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Zagara"));
    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_ConvoDehakaLineHandle_Init () {
    gt_ConvoDehakaLineHandle = TriggerCreate("gt_ConvoDehakaLineHandle_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Planet Arrival
//--------------------------------------------------------------------------------------------------
bool gt_PlanetArrival_Func (bool testConds, bool runActions) {
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_PlanetArrival_Init () {
    gt_PlanetArrival = TriggerCreate("gt_PlanetArrival_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Planet Departure
//--------------------------------------------------------------------------------------------------
bool gt_PlanetDeparture_Func (bool testConds, bool runActions) {
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_PlanetDeparture_Init () {
    gt_PlanetDeparture = TriggerCreate("gt_PlanetDeparture_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Leviathan Birth
//--------------------------------------------------------------------------------------------------
bool gt_LeviathanBirth_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    TriggerEnable(gt_LeviathanBirthIzshaBirth, true);
    TriggerEnable(gt_LeviathanBirthLeviathanAnim, true);
    lib281DEC45_gf_ToggleInteractives(false);
    lib281DEC45_gf_StoryCutsceneFade(false, 0.0, true);
    lib281DEC45_gf_ShowHideStoryUI(false);
    Wait(0.0625, c_timeGame);
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Zerg Adjutant"));
    libNtve_gf_PlayAnimation(libNtve_gf_MainActorofUnit(lib281DEC45_gf_CharacterUnit("Kerrigan")), c_animNameDefault, "Stand Sad End", c_animFlagNonLooping, 1.0);
    libNtve_gf_CinematicMode(true, PlayerGroupAll(), c_transitionDurationImmediate);
    libSwaC_gf_CampaignPlayCutscene("Cutscenes\\zLD_LeviathanBirth_Far.SC2Cutscene", lib281DEC45_gf_StoryModeDefaultPosition(), true, true);
    libNtve_gf_CinematicMode(false, PlayerGroupAll(), c_transitionDurationImmediate);
    lib281DEC45_gf_FadeStoryUITransparency(100.0, 0.0);
    lib281DEC45_gf_FadeStoryUITransparency(0.0, 4.0);
    lib281DEC45_gf_ShowHideUnitAbs(true, lib281DEC45_gf_CharacterUnit("Zerg Adjutant"));
    lib281DEC45_gf_StoryCutsceneFade(true, 0.0, false);
    lib281DEC45_gf_ShowHideStoryUI(true);
    lib281DEC45_gf_ToggleInteractives(true);
    TriggerEnable(gt_LeviathanBirthIzshaBirth, false);
    TriggerEnable(gt_LeviathanBirthLeviathanAnim, false);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_LeviathanBirth_Init () {
    gt_LeviathanBirth = TriggerCreate("gt_LeviathanBirth_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Leviathan Birth - Izsha Birth
//--------------------------------------------------------------------------------------------------
bool gt_LeviathanBirthIzshaBirth_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    libNtve_gf_PlayAnimation(libNtve_gf_MainActorofUnit(lib281DEC45_gf_CharacterUnit("Zerg Adjutant")), c_animNameDefault, "Birth Fast", c_animFlagNonLooping, 0.0);
    lib281DEC45_gf_ShowHideUnitAbs(true, lib281DEC45_gf_CharacterUnit("Zerg Adjutant"));
    TriggerEnable(TriggerGetCurrent(), false);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_LeviathanBirthIzshaBirth_Init () {
    gt_LeviathanBirthIzshaBirth = TriggerCreate("gt_LeviathanBirthIzshaBirth_Func");
    TriggerEnable(gt_LeviathanBirthIzshaBirth, false);
    TriggerAddEventCutsceneBookmarkFired(gt_LeviathanBirthIzshaBirth, c_cutsceneNone, "IzshaBirth");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Leviathan Birth - Leviathan Anim
//--------------------------------------------------------------------------------------------------
bool gt_LeviathanBirthLeviathanAnim_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    TriggerEnable(TriggerGetCurrent(), false);
    libNtve_gf_PlayAnimation(libNtve_gf_MainActorofUnit(gv_uNITSETLeviathan00), c_animNameDefault, "Adjutant Start Work", 0, c_animTimeDefault);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_LeviathanBirthLeviathanAnim_Init () {
    gt_LeviathanBirthLeviathanAnim = TriggerCreate("gt_LeviathanBirthLeviathanAnim_Func");
    TriggerEnable(gt_LeviathanBirthLeviathanAnim, false);
    TriggerAddEventCutsceneBookmarkFired(gt_LeviathanBirthLeviathanAnim, c_cutsceneNone, "Leviathan Izsha");
}

//--------------------------------------------------------------------------------------------------
// Trigger: zSMBriefing_Space02
//--------------------------------------------------------------------------------------------------
bool gt_zSMBriefing_Space02_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_ChangeRoom(lib281DEC45_ge_Rooms_StoryRoomVoid);
    DialogCreate(500, 400, c_anchorCenter, 0, 0, true);
    gv_cutsceneLoadingDialog = DialogLastCreated();
    DialogSetFullscreen(gv_cutsceneLoadingDialog, true);
    DialogSetImageVisible(gv_cutsceneLoadingDialog, false);
    DialogControlCreateFromTemplate(DialogLastCreated(), c_triggerControlTypeImage, "HotS_FullscreenImage/FullscreenImageTemplate");
    libNtve_gf_SetDialogItemImage(DialogControlLastCreated(), "Assets\\Textures\\ui_hots_loading_missionselect_zspace02.dds", PlayerGroupAll());
    libNtve_gf_CreateDialogItemLabel(DialogLastCreated(), 600, 50, c_anchorBottom, 0, 200, StringExternal("Param/Value/83CF7AAA"), Color(100,100,100), false, 2.0);
    libNtve_gf_SetDialogItemStyle(DialogControlLastCreated(), "LoadingScreenTitle", PlayerGroupAll());
    DialogSetVisible(gv_cutsceneLoadingDialog, PlayerGroupAll(), true);
    TimerStart(gv_cutsceneLoadingTimer, 1.0, false, c_timeGame);
    Wait(0.0625, c_timeGame);
    if ((UserDataGetInt("WriterStates", "ToshChoice", "Value", 1) == 2)) {
        CutsceneSetGlobalFilter("Nova");
    }
    else {
        CutsceneSetGlobalFilter("Tosh");
    }
    lib281DEC45_gf_PlayScriptedConversation("zSMBriefing_Space02", c_conversationSkipSimple, lib281DEC45_ge_SwarmStoryFadeStyle_FadeOutOnSkip, null);
    CutsceneSetGlobalFilter("Space");
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_zSMBriefing_Space02_Init () {
    gt_zSMBriefing_Space02 = TriggerCreate("gt_zSMBriefing_Space02_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: zSMBriefing_Space02 - Cutscene Loaded
//--------------------------------------------------------------------------------------------------
bool gt_zSMBriefing_Space02CutsceneLoaded_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    libNtve_gf_WaitForTimer(gv_cutsceneLoadingTimer, 0.0, false);
    DialogDestroy(gv_cutsceneLoadingDialog);
    CutscenePlay(EventCutsceneId());
    SoundtrackPlay(PlayerGroupAll(), c_soundtrackCategoryMusic, "ZSpace02MusicCutscene02_MissionBriefing", c_soundtrackCueAny, c_soundtrackIndexAny, false);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_zSMBriefing_Space02CutsceneLoaded_Init () {
    gt_zSMBriefing_Space02CutsceneLoaded = TriggerCreate("gt_zSMBriefing_Space02CutsceneLoaded_Func");
    TriggerAddEventCutsceneBookmarkFired(gt_zSMBriefing_Space02CutsceneLoaded, c_cutsceneNone, "CutsceneLoaded");
}

//--------------------------------------------------------------------------------------------------
// Trigger: zDebrief_DoWArc5
//--------------------------------------------------------------------------------------------------
bool gt_zDebrief_DoWArc5_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_ChangeRoom(lib281DEC45_ge_Rooms_StoryRoomMainSet);
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Zagara"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Primal Advisor"));
    lib281DEC45_gf_PreloadScriptedConversation("zDebrief_Arc5DoW", true);
    SoundtrackPlay(PlayerGroupAll(), c_soundtrackCategoryMusic, "ZSpace02MusicCutscene00_BroodMotherOrders", c_soundtrackCueAny, c_soundtrackIndexAny, false);
    lib281DEC45_gf_PlayScriptedConversation("zDebrief_Arc5DoW", c_conversationSkipSimple, lib281DEC45_ge_SwarmStoryFadeStyle_FadeOutOnSkip | lib281DEC45_ge_SwarmStoryFadeStyle_FadeInAfter, null);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_zDebrief_DoWArc5_Init () {
    gt_zDebrief_DoWArc5 = TriggerCreate("gt_zDebrief_DoWArc5_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: zDebrief_DoWArc6
//--------------------------------------------------------------------------------------------------
bool gt_zDebrief_DoWArc6_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    lib281DEC45_gf_ChangeRoom(lib281DEC45_ge_Rooms_StoryRoomMainSet);
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Zagara"));
    lib281DEC45_gf_ShowHideUnitAbs(false, lib281DEC45_gf_CharacterUnit("Primal Advisor"));
    lib281DEC45_gf_PreloadScriptedConversation("zDebrief_Arc6DoW", true);
    SoundtrackPlay(PlayerGroupAll(), c_soundtrackCategoryMusic, "zDebrief_Arc6DoW", c_soundtrackCueAny, c_soundtrackIndexAny, false);
    lib281DEC45_gf_PlayScriptedConversation("zDebrief_Arc6DoW", c_conversationSkipSimple, lib281DEC45_ge_SwarmStoryFadeStyle_FadeOutOnSkip | lib281DEC45_ge_SwarmStoryFadeStyle_FadeInAfter, null);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_zDebrief_DoWArc6_Init () {
    gt_zDebrief_DoWArc6 = TriggerCreate("gt_zDebrief_DoWArc6_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger Initialization
//--------------------------------------------------------------------------------------------------
void InitTriggers () {
    gt_Initialization_Init();
    gt_KaldrInit01Units_Init();
    gt_KaldrInit03Conversations2_Init();
    gt_KaldrInit04Environment2_Init();
    gt_SpaceInit05Characters_Init();
    gt_SpaceInit06Scenes_Init();
    gt_ApplyKaldirLighting_Init();
    gt_PrepareSpaceSet_Init();
    gt_ViewSpaceSet_Init();
    gt_ConvoAdjutantPre_Init();
    gt_ConvoZagaraPre_Init();
    gt_ConvoStukovPre_Init();
    gt_ConvoStukovPost_Init();
    gt_ConvoZagaraLineHandle_Init();
    gt_ConvoHyperionPre_Init();
    gt_ConvoHyperionPost_Init();
    gt_ConvoDehakaPre_Init();
    gt_ConvoDehakaLineHandle_Init();
    gt_PlanetArrival_Init();
    gt_PlanetDeparture_Init();
    gt_LeviathanBirth_Init();
    gt_LeviathanBirthIzshaBirth_Init();
    gt_LeviathanBirthLeviathanAnim_Init();
    gt_zSMBriefing_Space02_Init();
    gt_zSMBriefing_Space02CutsceneLoaded_Init();
    gt_zDebrief_DoWArc5_Init();
    gt_zDebrief_DoWArc6_Init();
}

//--------------------------------------------------------------------------------------------------
// Map Initialization
//--------------------------------------------------------------------------------------------------
void InitMap () {
    InitLibs();
    InitGlobals();
    InitTriggers();
}
